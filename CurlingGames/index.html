<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Curling Schedule</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }

    h1, h2 {
      margin-top: 0;
    }

    /* GRID LAYOUT */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    /* CARD STYLES */
    .card {
      background: white;
      padding: 12px 14px;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      font-size: 0.95rem;
    }

    .current-game {
      border-left: 5px solid #43a047;
    }

    .next-game {
      border-left: 5px solid #1e88e5;
    }

    .past-game {
      border-left: 5px solid #9e9e9e;
      opacity: 0.85;
    }

    .game-time {
      font-weight: bold;
      margin-bottom: 4px;
    }

    .event {
      font-style: bold;
      color: #0F0F0F;
      margin-bottom: 4px;
    }

    .stream a {
      color: #1e88e5;
      text-decoration: none;
    }

    .result {
      margin-top: 6px;
      font-weight: bold;
    }

    .empty {
      color: #777;
      font-style: italic;
    }
  </style>
</head>
<body>

  <h1>ü•å My Curling Games</h1>

  <h2>Current Game</h2>
  <div id="current-game" class="grid"></div>

  <h2>Next Game</h2>
  <div id="next-game" class="grid"></div>

  <h2>Upcoming Games</h2>
  <div id="upcoming-games" class="grid"></div>

  <h2>Past Games</h2>
  <div id="past-games" class="grid"></div>

  <script>
    const games = [
      {
        date: "2026-01-09T12:00",
        location: "St Paul Curling Club",
        event: "Big Spiel",
        stream: "https://www.youtube.com/watch?v=hbHEa4qaJ1M",
        result: "Win"
      },
      {
        date: "2026-01-09T18:00",
        location: "Frogtown Curling Club | Sheet C",
        event: "Big Spiel",
        stream: "https://youtube.com/@frogtowncurling?si=7QdOOLdLtUU8Rctt",
        result: "Win"
      },
      {
        date: "2026-01-10T10:30",
        location: "Four Seasons Curling Club | Sheet B",
        event: "Big Spiel",
        stream: "https://youtube.com/@fourseasonscurlingcenter?si=Lt8pnb8gXogliMPs",
        result: "Win"
      },
      {
        date: "2026-01-10T17:30",
        location: "Chaska Curling Club | Sheet 3",
        event: "Big Spiel",
        stream: "https://youtube.com/@chaskacurlingcenter?si=aBuA6H7Lm-0ISdO3",
        result: "Loss"
      },
      {
        date: "2026-01-15T12:30",
        location: "Stevens Point Curling Club | Sheet B",
        event: "Wisconsin Club Playdowns",
        stream: "https://www.youtube.com/@PointCurling/streams",
        result: "Loss"
      },
      {
        date: "2026-01-15T17:00",
        location: "Stevens Point Curling Club | Sheet D",
        event: "Wisconsin Club Playdowns",
        stream: "https://www.youtube.com/@PointCurling/streams",
        result: "Win"
      },
      {
        date: "2026-01-16T08:00",
        location: "Stevens Point Curling Club | Sheet A",
        event: "Wisconsin Club Playdowns",
        stream: "https://www.youtube.com/@PointCurling/streams",
        result: "Win"
      },
      {
        date: "2026-01-16T14:30",
        location: "Stevens Point Curling Club | Sheet B",
        event: "Wisconsin Club Playdowns",
        stream: "https://www.youtube.com/@PointCurling/streams",
        result: "Win"
      },
      {
        date: "2026-01-16T21:00",
        location: "Stevens Point Curling Club | Sheet B",
        event: "Wisconsin Club Playdowns",
        stream: "https://www.youtube.com/@PointCurling/streams",
        result: "Loss"
      },
      {
        date: "2026-01-17T12:00",
        location: "Stevens Point Curling Club | Sheet C",
        event: "Wisconsin Club Playdowns",
        stream: "https://www.youtube.com/@PointCurling/streams",
        result: null
      },
    ];

    const now = new Date();
    const THREE_HOURS = 2.5 * 60 * 60 * 1000;

    games.sort((a, b) => new Date(a.date) - new Date(b.date));

    let currentGame = null;
    const futureGames = [];
    const pastGames = [];

    games.forEach(game => {
      const start = new Date(game.date);
      const diff = now - start;

      if (diff >= 0 && diff <= THREE_HOURS) {
        currentGame = game;
      } else if (start > now) {
        futureGames.push(game);
      } else {
        pastGames.push(game);
      }
    });

    const nextGame = futureGames[0];
    const upcomingGames = futureGames.slice(1);

    function renderGame(game, type = "") {
      const date = new Date(game.date);
      return `
        <div class="card ${type}">
          <div class="game-time">
            ${date.toLocaleDateString()}<br>
            ${date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
          </div>
          <div class="event">üèÜ ${game.event}</div>
          <div>üìç ${game.location}</div>

          ${type === "next-game" || type === "current-game" ? `
            <div class="stream">
              ${game.stream
                ? `üì∫ <a href="${game.stream}" target="_blank">Stream</a>`
                : "üì∫ No stream"}
            </div>
          ` : ""}

          ${type === "past-game" ? `
            <div class="result">
              üèÅ ${game.result || "No result"}
            </div>
          ` : ""}
        </div>
      `;
    }

    document.getElementById("current-game").innerHTML =
      currentGame
        ? renderGame(currentGame, "current-game")
        : `<div class="empty">No game in progress.</div>`;

    document.getElementById("next-game").innerHTML =
      nextGame
        ? renderGame(nextGame, "next-game")
        : `<div class="empty">No upcoming games.</div>`;

    document.getElementById("upcoming-games").innerHTML =
      upcomingGames.length
        ? upcomingGames.map(g => renderGame(g)).join("")
        : `<div class="empty">No additional upcoming games.</div>`;

    document.getElementById("past-games").innerHTML =
      pastGames.length
        ? pastGames.reverse().map(g => renderGame(g, "past-game")).join("")
        : `<div class="empty">No past games yet.</div>`;
  </script>

</body>
</html>
